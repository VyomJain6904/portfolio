---
import "../../styles/global.css";
import { AstroSeo } from "@astrolib/seo";
import { getImage } from "astro:assets";
import mac from "../../assets/images/mac.jpg";
import mac1 from "../../assets/images/mac1.jpg";
import mac2 from "../../assets/images/mac2.jpg";
import mac3 from "../../assets/images/mac3.jpg";
import { userConfig } from "../../config/userConfig";

const backgrounds = await Promise.all([
	getImage({ src: mac, width: 3500 }),
	getImage({ src: mac1, width: 3500 }),
	getImage({ src: mac2, width: 3500 }),
	getImage({ src: mac3, width: 3500 }),
]);
---

<!-- Core meta tags -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
	name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1"
/>
<meta name="author" content={userConfig.name} />

<!-- SEO Configuration -->
<AstroSeo
	title={Astro.props.title || userConfig.seo.title}
	description={Astro.props.description || userConfig.seo.description}
	canonical={Astro.props.canonical || userConfig.website}
	openGraph={{
		url: Astro.props.openGraph?.url || userConfig.website,
		title: Astro.props.openGraph?.title || userConfig.seo.title,
		description:
			Astro.props.openGraph?.description || userConfig.seo.description,
		images: [
			{
				url: "",
				// og image here
			},
		],
		site_name: Astro.props.openGraph?.site_name || userConfig.name,
	}}
/>

<link rel="apple-touch-icon" sizes="180x180" href="/src/assets/images/me.jpg" />
<link
	rel="icon"
	type="image/png"
	sizes="32x32"
	href="/src/assets/images/me.jpg"
/>
<link
	rel="icon"
	type="image/png"
	sizes="16x16"
	href="/src/assets/images/me.jpg"
/>
<link
	rel="manifest"
	href="/manifest.json
/>

<!-- Theme colors for browsers -->
<meta
	name="
	msapplication-TileColor"
	content={userConfig.theme.secondaryColor}
/>

<meta
	name="msapplication-TileColor"
	content={userConfig.theme.secondaryColor}
/>
<meta name="theme-color" content={userConfig.theme.secondaryColor} />

<!-- Auto-generated sitemap -->
<link rel="sitemap" href="/sitemap-index.xml" />

<!-- Preload background images for performance -->
{
	backgrounds.map((bg) => (
		/* bg.src is the resolved url returned by getImage; if your getImage returns a different field, inspect console.log(backgrounds) and adjust accordingly */
		<link rel="preload" href={bg.src} as="image" fetchpriority="high" />
	))
}
