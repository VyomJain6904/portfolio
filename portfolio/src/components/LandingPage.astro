---
export const prerender = false;
import { getImage } from "astro:assets";
import AppLayout from "../layouts/AppLayout";
import w1 from "../assets/images/w1.png";
import w2 from "../assets/images/w2.jpg";
import w3 from "../assets/images/w3.jpeg";
import w4 from "../assets/images/w4.png";
import w5 from "../assets/images/w5.jpg";
import w6 from "../assets/images/w6.png";
import w7 from "../assets/images/w7.png";
import w8 from "../assets/images/w8.png";
import w9 from "../assets/images/w9.png";

const backgrounds = [w1, w2, w3, w4, w5, w6, w7, w8, w9];

function getRandomBackground() {
	return `bg-${Math.floor(Math.random() * backgrounds.length) + 1}`;
}

const optimizedBackgrounds = await Promise.all(
	backgrounds.map((bg) =>
		getImage({
			src: bg,
			width: 3500,
		})
	)
);

const backgroundMap = Object.fromEntries(
	optimizedBackgrounds.map((bg, index) => [`bg-${index + 1}`, bg.src])
);
---

<AppLayout
	client:load
	initialBg={getRandomBackground()}
	backgroundMap={backgroundMap}
/>
